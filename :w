import React from 'react'
import {Container, FormControl, FormLabel, InputRightElement} from '@chakra-ui/react'

import Input from '../../components/Form/Input'
import Button from '../../components/Form/Button'
import Box from '../../components/Card'

const FormComponent = ({handleSubmit, isSubmitting, formTemplate, textButton}) => {
  const [show, setShow] = React.useState(false)

  const handleInputPassword = () => setShow(!show)

  const renderFormControl = (fields) =>
    fields.map((field) => (
      <FormControl id={field.name} key={field.name}>
        <FormLabel>{field.label}</FormLabel>
        <Input
          name={field.name}
          type={field.type}
          onChange={field.onChange}
          value={field.value}
          placeholder={field.placeHolder}
        />
        {field.type === 'password' && (
          <InputRightElement width="4.5rem">
            <Button h="1.75rem" size="sm" handleClick={handleInputPassword}>
              {show ? 'Mostrar' : 'Esconder'}
            </Button>
          </InputRightElement>
        )}
      </FormControl>
    ))

  return (
    <Container>
      <Box>
        <form onSubmit={handleSubmit}>
          {renderFormControl(formTemplate)}
          <Button loading={isSubmitting} textButton={textButton} />
        </form>
      </Box>
    </Container>
  )
}

export default FormComponent
